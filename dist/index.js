!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(r.qstring={})}(this,function(r){"use strict";var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},S=function(r,e){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(r,e){var n=[],t=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(t=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);t=!0);}catch(r){o=!0,i=r}finally{try{!t&&u.return&&u.return()}finally{if(o)throw i}}return n}(r,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function e(r){var e=r.map(function(r){return r.split("=")}).map(function(r,e){var n=S(r,2),t=n[0],o=n[1];return 0!==e||o?[t.split("."),o]:[[""],t]}),o={};return e.forEach(function(r){var e=S(r,2),n=e[0],t=e[1];return function r(e){var n=this.value,t=this.parentScope;var o=e.shift();var i=m(o),a=i.inner,u=i.openingIndex,c=i.hasBrackets;var s=decodeURIComponent(c?o.substring(0,u):o);var f=!!e.length;var l=t[s];var y=c||!f&&s in t&&l!==n;var p=y&&!c&&!Array.isArray(l);var v=p?[l]:l||y&&[]||f&&{}||n;t[s]=v;var d=void 0;if(y){var h=f?d={}:n;a?v[a]=h:v.push(h)}else f&&(d=v);d&&r.call({parentScope:d,value:n},e)}.call({parentScope:o,value:!t||a(t)},n)}),o}function m(r){var e=[r.indexOf("["),r.indexOf("]")],n=e[0],t=e[1];return-1===n||-1===t?{isArray:!1}:{inner:r.substring(n+1,t),openingIndex:n,closingIndex:t,isArray:!0,hasBrackets:!0}}function a(r){var e=parseFloat(r);if(!isNaN(e))return e;var n=decodeURIComponent(r),t=m(n),o=t.isArray,i=t.inner;t.openingIndex,t.closingIndex;return o?i.split(",").map(a):n}function u(r){var e=[];return function r(e){var n=this||{},t=n.recurse;t=void 0===t?{}:t;var o=t.parentKeys,i=n.root;var a=e&&"object"===(void 0===e?"undefined":A(e));if(a){var u=Object.entries(e),c=Array.isArray(e),s=!0,f=!1,l=void 0;try{for(var y,p=u[Symbol.iterator]();!(s=(y=p.next()).done);s=!0){var v=S(y.value,2),d=v[0],h=v[1],m=Array.prototype.concat.apply([],o||[]),b={key:d};c&&(b.isArray=c),m.push(b),r.call({recurse:{parentKeys:m},root:i},h)}}catch(r){f=!0,l=r}finally{try{!s&&p.return&&p.return()}finally{if(f)throw l}}return}var g={value:e};var x=1===o.length&&""===o[0].key;x?g.isDefaultParam=x:g.keys=o;i.collection.push(g)}.call({root:{collection:e}},r||{}),e}function d(r,e){var n=e.isArray,t=e.key,o=this.encodeComponent(t);return r?r+(n?"["+o+"]":"."+o):o}function c(r){var e=(this||{}).encode,n=!1===e?function(r){return r}:"function"==typeof e?e:encodeURIComponent,t=[],o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=s.isDefaultParam,l=s.keys,y=n(s.value);if(f)t.push(y);else{var p=d.bind({encodeComponent:n}),v=l.reduce(p,"");t.push(v+"="+y)}}}catch(r){i=!0,a=r}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}return t}r.parse=function(r){return r?e(("?"===r[0]?r.substring(1):r).split("&")):{}},r.stringify=function(r){var e=this||{},n=e.prefix,t=void 0===n?"?":n,o=e.encode,i=void 0===o||o,a=u(r);return(t||"")+c.call({encode:i},a).join("&")},r.parseProcessArgs=function(r){return e(r.filter(function(r){return r.includes("--")}).map(function(r){return r.replace("--","")}))},r.toProcessArgs=function(r){var e=u(r);return"--"+c.call({encode:!1},e).join(" --")},Object.defineProperty(r,"__esModule",{value:!0})});
